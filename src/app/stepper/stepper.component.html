<mat-vertical-stepper linear="true" *ngIf="field.fieldGroup as fields">
    <mat-step *ngFor="let step of fields; let index = index; let last = last">
        <ng-template matStepLabel>{{ step.templateOptions.label }}</ng-template>
        <formly-field [field]="step"></formly-field>

        <div>
            <button matStepperPrevious *ngIf="index !== 0" class="btn btn-primary" type="button">
                Back
            </button>

            <button matStepperNext *ngIf="!last" class="btn btn-primary" type="button" [disabled]="!isValid(step)">
                Next
            </button>

            <button *ngIf="last" class="btn btn-primary" [disabled]="!form.valid" type="submit">
                Submit
            </button>
        </div>
    </mat-step>
</mat-vertical-stepper>